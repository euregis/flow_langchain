<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxo Horizontal & VariÃ¡veis</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <h1>Editor de Fluxo</h1>
        <div class="file-selector">
            <label for="json-file-input" class="file-label">ðŸ“‚ Carregar JSON</label>
            <input type="file" id="json-file-input" accept=".json" style="display: none;">

            <button id="add-node-btn" class="file-label">âž• Novo NÃ³</button>
            <button id="vars-manager-btn" class="file-label btn-purple">ðŸ›  VariÃ¡veis Globais</button>
            <button id="save-version-btn" class="file-label btn-green">ðŸ’¾ Salvar JSON</button>
            <button id="theme-toggle-btn" class="file-label btn-theme-toggle" title="Alternar Tema">ðŸŒ™</button>
        </div>
        <p style="color:#666; font-size: 0.9em;">Carregue o arquivo para visualizar. O layout Ã© horizontal. Clique nos
            nÃ³s para editar.</p>
    </header>

    <main id="flow-container">
    </main>

    <div id="node-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" id="close-node-modal">&times;</span>
            <h2 id="modal-title">Editar NÃ³</h2>

            <form id="node-editor-form">
            </form>

            <div class="modal-footer">
                <button type="button" class="btn-primary" id="save-node-btn">Salvar AlteraÃ§Ãµes</button>
            </div>
        </div>
    </div>

    <div id="vars-modal" class="modal hidden">
        <div class="modal-content" style="height: auto; max-height: 90vh;">
            <span class="close-button" id="close-vars-modal">&times;</span>
            <h2>VariÃ¡veis de Ambiente</h2>
            <p style="color: #666; margin-bottom: 20px;">
                Defina aqui as chaves globais que poderÃ£o ser lidas ou atualizadas pelos nÃ³s.
            </p>

            <div style="overflow-y: auto; max-height: 60vh; padding: 5px;">
                <table class="vars-table" id="global-vars-table">
                    <thead>
                        <tr>
                            <th style="width: 40%;">Chave (Key)</th>
                            <th style="width: 50%;">Valor Inicial</th>
                            <th style="width: 10%; text-align: center;">AÃ§Ã£o</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>

            <button type="button" id="add-global-var-btn" class="btn-add"
                style="margin-top: 15px; padding: 10px 20px; font-size: 0.9em;">
                âž• Adicionar VariÃ¡vel
            </button>

            <div class="modal-footer">
                <button type="button" class="btn-primary" id="save-vars-btn">Concluir</button>
            </div>
        </div>
    </div>

    <div id="version-modal" class="modal hidden">
        <div class="modal-content" style="width: 500px; height: auto;">
            <span class="close-button version-modal-close">&times;</span>
            <h2>Baixar JSON</h2>
            <form id="version-form">
                <p>O arquivo incluirÃ¡ os NÃ³s e as VariÃ¡veis de Ambiente.</p>
                <div class="form-group">
                    <label for="new-filename">Nome do Arquivo</label>
                    <input type="text" id="new-filename" value="flow_v2.json">
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">Baixar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>